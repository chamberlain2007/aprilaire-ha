from homeassistant.const import UnitOfTemperature

from custom_components.aprilaire.util import convert_temperature_if_needed

CONVERSION_MAP = [
    [-40, -40],
    [-39.5, -39],
    [-39, -38],
    [-38.5, -37],
    [-38, -36],
    [-37.5, -36],
    [-37, -35],
    [-36.5, -34],
    [-36, -33],
    [-35.5, -32],
    [-35, -31],
    [-34.5, -30],
    [-34, -29],
    [-33.5, -28],
    [-33, -27],
    [-32.5, -27],
    [-32, -26],
    [-31.5, -25],
    [-31, -24],
    [-30.5, -23],
    [-30, -22],
    [-29.5, -21],
    [-29, -20],
    [-28.5, -19],
    [-28, -18],
    [-27.5, -18],
    [-27, -17],
    [-26.5, -16],
    [-26, -15],
    [-25.5, -14],
    [-25, -13],
    [-24.5, -12],
    [-24, -11],
    [-23.5, -10],
    [-23, -9],
    [-22.5, -9],
    [-22, -8],
    [-21.5, -7],
    [-21, -6],
    [-20.5, -5],
    [-20, -4],
    [-19.5, -3],
    [-19, -2],
    [-18.5, -1],
    [-18, 0],
    [-17.5, 1],
    [-17, 1],
    [-16.5, 2],
    [-16, 3],
    [-15.5, 4],
    [-15, 5],
    [-14.5, 6],
    [-14, 7],
    [-13.5, 8],
    [-13, 9],
    [-12.5, 10],
    [-12, 10],
    [-11.5, 11],
    [-11, 12],
    [-10.5, 13],
    [-10, 14],
    [-9.5, 15],
    [-9, 16],
    [-8.5, 17],
    [-8, 18],
    [-7.5, 19],
    [-7, 19],
    [-6.5, 20],
    [-6, 21],
    [-5.5, 22],
    [-5, 23],
    [-4.5, 24],
    [-4, 25],
    [-3.5, 26],
    [-3, 27],
    [-2.5, 28],
    [-2, 28],
    [-1.5, 29],
    [-1, 30],
    [-0.5, 31],
    [0, 32],
    [0.5, 33],
    [1, 34],
    [1.5, 35],
    [2, 36],
    [2.5, 37],
    [3, 37],
    [3.5, 38],
    [4, 39],
    [4.5, 40],
    [5, 41],
    [5.5, 42],
    [6, 43],
    [6.5, 44],
    [7, 45],
    [7.5, 46],
    [8, 46],
    [8.5, 47],
    [9, 48],
    [9.5, 49],
    [10, 50],
    [10.5, 51],
    [11, 52],
    [11.5, 53],
    [12, 54],
    [12.5, 55],
    [13, 55],
    [13.5, 56],
    [14, 57],
    [14.5, 58],
    [15, 59],
    [15.5, 60],
    [16, 61],
    [16.5, 62],
    [17, 63],
    [17.5, 64],
    [18, 64],
    [18.5, 65],
    [19, 66],
    [19.5, 67],
    [20, 68],
    [20.5, 69],
    [21, 70],
    [21.5, 71],
    [22, 72],
    [22.5, 73],
    [23, 73],
    [23.5, 74],
    [24, 75],
    [24.5, 76],
    [25, 77],
    [25.5, 78],
    [26, 79],
    [26.5, 80],
    [27, 81],
    [27.5, 82],
    [28, 82],
    [28.5, 83],
    [29, 84],
    [29.5, 85],
    [30, 86],
    [30.5, 87],
    [31, 88],
    [31.5, 89],
    [32, 90],
    [32.5, 91],
    [33, 91],
    [33.5, 92],
    [34, 93],
    [34.5, 94],
    [35, 95],
    [35.5, 96],
    [36, 97],
    [36.5, 98],
    [37, 99],
    [37.5, 100],
    [38, 100],
    [38.5, 101],
    [39, 102],
    [39.5, 103],
    [40, 104],
    [40.5, 105],
    [41, 106],
    [41.5, 107],
    [42, 108],
    [42.5, 109],
    [43, 109],
    [43.5, 110],
    [44, 111],
    [44.5, 112],
    [45, 113],
    [45.5, 114],
    [46, 115],
    [46.5, 116],
    [47, 117],
    [47.5, 118],
    [48, 118],
    [48.5, 119],
    [49, 120],
    [49.5, 121],
    [50, 122],
    [50.5, 123],
    [51, 124],
    [51.5, 125],
    [52, 126],
    [52.5, 127],
    [53, 127],
    [53.5, 128],
    [54, 129],
    [54.5, 130],
    [55, 131],
]


def test_celsius_conversion():
    assert convert_temperature_if_needed(UnitOfTemperature.CELSIUS, None) is None
    assert convert_temperature_if_needed(UnitOfTemperature.CELSIUS, 0) == 0


def test_fahrenheit_conversion():
    for conversion in CONVERSION_MAP:
        assert (
            convert_temperature_if_needed(UnitOfTemperature.FAHRENHEIT, conversion[0])
            == conversion[1]
        )
